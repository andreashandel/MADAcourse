<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />


<meta name="author" content="Andreas Handel" />


<title>Assessment - Fitting Basic Statistical Models</title>

<script src="site_libs/header-attrs-2.20/header-attrs.js"></script>
<script src="site_libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
<link href="site_libs/bootstrap-4.6.0/bootstrap.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-4.6.0/bootstrap.bundle.min.js"></script>
<script src="site_libs/bs3compat-0.4.2/transition.js"></script>
<script src="site_libs/bs3compat-0.4.2/tabs.js"></script>
<script src="site_libs/bs3compat-0.4.2/bs3compat.js"></script>
<script src="site_libs/jqueryui-1.11.4/jquery-ui.min.js"></script>
<link href="site_libs/tocify-1.9.1/jquery.tocify.css" rel="stylesheet" />
<script src="site_libs/tocify-1.9.1/jquery.tocify.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<link href="site_libs/highlightjs-9.12.0/default.css" rel="stylesheet" />
<script src="site_libs/highlightjs-9.12.0/highlight.js"></script>
<link href="site_libs/font-awesome-5.1.0/css/all.css" rel="stylesheet" />
<link href="site_libs/font-awesome-5.1.0/css/v4-shims.css" rel="stylesheet" />
<link rel="icon" type="image/png" href="media/MADAlogo.png" />

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>

<style type="text/css">code{white-space: pre;}</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>









<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
details > summary > p:only-child {
  display: inline;
}
pre code {
  padding: 0;
}
</style>


<style type="text/css">
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #adb5bd;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script type="text/javascript">
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark the anchor link active (and if it's in a dropdown, also mark that active)
  var dropdown = menuAnchor.closest('li.dropdown');
  if (window.bootstrap) { // Bootstrap 4+
    menuAnchor.addClass('active');
    dropdown.find('> .dropdown-toggle').addClass('active');
  } else { // Bootstrap 3
    menuAnchor.parent().addClass('active');
    dropdown.addClass('active');
  }

  // Navbar adjustments
  var navHeight = $(".navbar").first().height() + 15;
  var style = document.createElement('style');
  var pt = "padding-top: " + navHeight + "px; ";
  var mt = "margin-top: -" + navHeight + "px; ";
  var css = "";
  // offset scroll position for anchor links (for fixed navbar)
  for (var i = 1; i <= 6; i++) {
    css += ".section h" + i + "{ " + pt + mt + "}\n";
  }
  style.innerHTML = "body {" + pt + "padding-bottom: 40px; }\n" + css;
  document.head.appendChild(style);
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before, .tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "\e259";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "\e258";
  font-family: 'Glyphicons Halflings';
  border: none;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->



<style type="text/css">

#TOC {
  margin: 25px 0px 20px 0px;
}
@media (max-width: 768px) {
#TOC {
  position: relative;
  width: 100%;
}
}

@media print {
.toc-content {
  /* see https://github.com/w3c/csswg-drafts/issues/4434 */
  float: right;
}
}

.toc-content {
  padding-left: 30px;
  padding-right: 40px;
}

div.main-container {
  max-width: 1200px;
}

div.tocify {
  width: 20%;
  max-width: 260px;
  max-height: 85%;
}

@media (min-width: 768px) and (max-width: 991px) {
  div.tocify {
    width: 25%;
  }
}

@media (max-width: 767px) {
  div.tocify {
    width: 100%;
    max-width: none;
  }
}

.tocify ul, .tocify li {
  line-height: 20px;
}

.tocify-subheader .tocify-item {
  font-size: 0.90em;
}

.tocify .list-group-item {
  border-radius: 0px;
}

.tocify-subheader {
  display: inline;
}
.tocify-subheader .tocify-item {
  font-size: 0.95em;
}

</style>



</head>

<body>


<div class="container-fluid main-container">


<!-- setup 3col/9col grid for toc_float and main content  -->
<div class="row">
<div class="col-xs-12 col-sm-4 col-md-3">
<div id="TOC" class="tocify">
</div>
</div>

<div class="toc-content col-xs-12 col-sm-8 col-md-9">




<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-bs-toggle="collapse" data-target="#navbar" data-bs-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">MADA Course</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    General Information
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="./Course_Syllabus.html">Syllabus</a>
    </li>
    <li>
      <a href="./Course_Schedule.html">Schedule</a>
    </li>
    <li>
      <a href="./Course_Communication.html">Communication</a>
    </li>
    <li>
      <a href="./Course_Assessments.html">Assessments</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Modules
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li class="dropdown-submenu">
      <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">1. Course and Tools Introduction</a>
      <ul class="dropdown-menu" role="menu">
        <li>
          <a href="./Introduction_Course.html">Course Introduction</a>
        </li>
        <li>
          <a href="./Tools_RandRStudio.html">R and Rstudio</a>
        </li>
        <li>
          <a href="./Tools_Github_Introduction.html">GitHub Introduction</a>
        </li>
        <li>
          <a href="./Tools_Github_R_Workflow.html">GitHub and R Workflow</a>
        </li>
        <li>
          <a href="./Tools_Reproducibility.html">Reproducibility, Quarto &amp; Co</a>
        </li>
        <li>
          <a href="./Tools_Reference_Management.html">Reference Management</a>
        </li>
        <li>
          <a href="./Assessment_Course_Tools_Introduction.html">Assessment: Course and Tools Introduction</a>
        </li>
      </ul>
    </li>
    <li class="dropdown-submenu">
      <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">2. Data Analysis Introduction</a>
      <ul class="dropdown-menu" role="menu">
        <li>
          <a href="./Data_Analysis_Motivation.html">Motivating Examples</a>
        </li>
        <li>
          <a href="./Data_Analysis_Overview.html">Data Analysis Overview</a>
        </li>
        <li>
          <a href="./Data_Analysis_Structure.html">Data Analysis Structure</a>
        </li>
        <li>
          <a href="./Assessment_Data_Analysis.html">Assessment: Data Analysis Introduction</a>
        </li>
      </ul>
    </li>
    <li class="dropdown-submenu">
      <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">3. R Coding Basics</a>
      <ul class="dropdown-menu" role="menu">
        <li>
          <a href="./Rcoding_Basics.html">R Coding Basics</a>
        </li>
        <li>
          <a href="./Rcoding_Tidyverse.html">Tidyverse and Friends</a>
        </li>
        <li>
          <a href="./Assessment_Coding.html">Assessment: R Coding Basics</a>
        </li>
      </ul>
    </li>
    <li class="dropdown-submenu">
      <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">4. Contemplating, finding and wrangling data</a>
      <ul class="dropdown-menu" role="menu">
        <li>
          <a href="./Data_Types.html">Data Types</a>
        </li>
        <li>
          <a href="./Data_Finding.html">Finding Data</a>
        </li>
        <li>
          <a href="./Data_Wrangling.html">Data wrangling</a>
        </li>
        <li>
          <a href="./Assessment_Data_Finding_Wrangling.html">Assessment: Data Finding and Wrangling</a>
        </li>
      </ul>
    </li>
    <li class="dropdown-submenu">
      <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">5. Visualization</a>
      <ul class="dropdown-menu" role="menu">
        <li>
          <a href="./Visualization_Overview.html">Visualization Overview</a>
        </li>
        <li>
          <a href="./Visualization_in_R.html">Visualization in R</a>
        </li>
        <li>
          <a href="./Assessment_Visualization.html">Assessment: Visualization</a>
        </li>
      </ul>
    </li>
    <li class="dropdown-submenu">
      <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">6. Data Exploration</a>
      <ul class="dropdown-menu" role="menu">
        <li>
          <a href="./Data_Exploration.html">Exploring data</a>
        </li>
        <li>
          <a href="./Assessment_Exploration.html">Assessment: Exploration</a>
        </li>
      </ul>
    </li>
    <li class="dropdown-submenu">
      <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">7. Statistical analysis overview</a>
      <ul class="dropdown-menu" role="menu">
        <li>
          <a href="./Statistical_Analysis_Introduction.html">Statistical analysis introduction</a>
        </li>
        <li>
          <a href="./Statistical_Terminology.html">Some Statistical Model Fitting Terminology</a>
        </li>
        <li>
          <a href="./Assessment_Statistical_Analysis.html">Assessment: Statistical Analysis Overview</a>
        </li>
      </ul>
    </li>
    <li class="dropdown-submenu">
      <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">8. Fitting basic statistical models</a>
      <ul class="dropdown-menu" role="menu">
        <li>
          <a href="./Basic_Statistical_Models.html">Basic statistical models</a>
        </li>
        <li>
          <a href="./Model_Fitting_R.html">Fitting statistical models in R</a>
        </li>
        <li>
          <a href="./Assessment_Fitting_Basic_Models.html">Assessment: Fitting Basic Models</a>
        </li>
      </ul>
    </li>
    <li class="dropdown-submenu">
      <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">9. Evaluating your model fits</a>
      <ul class="dropdown-menu" role="menu">
        <li>
          <a href="./Model_Evaluation_Overview.html">Model evaluation overview</a>
        </li>
        <li>
          <a href="./Model_Evaluation_Performance.html">Model performance evaluation</a>
        </li>
        <li>
          <a href="./Model_Evaluation_Overfitting.html">Model performance &amp; overfitting</a>
        </li>
        <li>
          <a href="./Model_Evaluation_Diagnostics.html">Model Diagostics</a>
        </li>
        <li>
          <a href="./Model_Evaluation_Uncertainty.html">Model Uncertainty</a>
        </li>
        <li>
          <a href="./Assessment_Model_Evaluation.html">Assessment: Model evaluation</a>
        </li>
      </ul>
    </li>
    <li class="dropdown-submenu">
      <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">10. Improving your model fits</a>
      <ul class="dropdown-menu" role="menu">
        <li>
          <a href="./Model_Improvement_Overview.html">Improving model fits overview</a>
        </li>
        <li>
          <a href="./Model_Improvement_Data_Processing.html">Pre-processing data</a>
        </li>
        <li>
          <a href="./Model_Improvement_Subset_Selection.html">Subset selection</a>
        </li>
        <li>
          <a href="./Model_Improvement_Regularization.html">Regularization</a>
        </li>
        <li>
          <a href="./Model_Improvement_Tuning.html">Model tuning</a>
        </li>
        <li>
          <a href="./Assessment_Model_Improvement.html">Assessment: Model Improvement</a>
        </li>
      </ul>
    </li>
    <li class="dropdown-submenu">
      <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">11. Machine Learning Models I</a>
      <ul class="dropdown-menu" role="menu">
        <li>
          <a href="./ML_Models_Overview.html">ML Models overview</a>
        </li>
        <li>
          <a href="./Polynomial_Spline_Models.html">Polynomial and Spline Models</a>
        </li>
        <li>
          <a href="./Decision_Trees.html">Decision Trees</a>
        </li>
        <li>
          <a href="./Many_Tree_Models.html">Many-tree models</a>
        </li>
        <li>
          <a href="./Assessment_ML_Models_1.html">Assessment: ML models 1</a>
        </li>
      </ul>
    </li>
    <li class="dropdown-submenu">
      <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">12. Machine Learning Models II</a>
      <ul class="dropdown-menu" role="menu">
        <li>
          <a href="./SVM_Models.html">Support Vector Machine Models</a>
        </li>
        <li>
          <a href="./DA_Models.html">Discriminant Analysis Models</a>
        </li>
        <li>
          <a href="./More_ML_Models.html">Some more ML models</a>
        </li>
        <li>
          <a href="./Assessment_ML_Models_2.html">Assessment: ML models 2</a>
        </li>
      </ul>
    </li>
    <li class="dropdown-submenu">
      <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">13. The complete analysis workflow</a>
      <ul class="dropdown-menu" role="menu">
        <li>
          <a href="./Complete_data_analysis_workflow.html">Complete data analysis workflow</a>
        </li>
        <li>
          <a href="./Data_Models_Not_Covered.html">More Data and Models</a>
        </li>
        <li>
          <a href="./Assessment_Complete_Workflow.html">Assessment: Complete Analysis Workflow</a>
        </li>
      </ul>
    </li>
    <li class="dropdown-submenu">
      <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">14. Deep learning, AI and Big data</a>
      <ul class="dropdown-menu" role="menu">
        <li>
          <a href="./DL_AI_BigData.html">Deep Learning, AI and Big Data</a>
        </li>
      </ul>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Project
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="./Project_Overview.html">Project Overview</a>
    </li>
    <li>
      <a href="./Project_Details.html">Project Details</a>
    </li>
    <li>
      <a href="./Project_Review.html">Project Review</a>
    </li>
    <li>
      <a href="./Project_Examples.html">Project Examples</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Resources
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="./Course_Resources.html">Course Resources</a>
    </li>
    <li>
      <a href="./General_Resources.html">General Resources</a>
    </li>
    <li>
      <a href="./Course_Glossary.html">Glossary</a>
    </li>
  </ul>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/andreashandel/MADAcourse">
    <span class="fab fa-github"></span>
     
  </a>
</li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div id="header">



<h1 class="title toc-ignore">Assessment - Fitting Basic Statistical
Models</h1>
<h4 class="author">Andreas Handel</h4>
<h4 class="date">2023-03-07 09:04:39</h4>

</div>


<div id="quiz" class="section level1">
<h1>Quiz</h1>
<p>Get the quiz sheet for this module from the general <a
href="./Course_Assessments.html"><strong>Assessments</strong></a> page.
Fill it in, then submit to the online grading system before the
deadline.</p>
</div>
<div id="exercise" class="section level1">
<h1>Exercise</h1>
<p>We’ll practice a bit of model fitting using the
<code>tidymodels</code> framework. Of course, some wrangling tasks are
likely part as well. This is another solo exercise. We’ll eventually get
back to group work, I promise 😁.</p>
<div id="setup" class="section level2">
<h2>Setup</h2>
<p><strong>This will be part of your portfolio site.</strong></p>
<p>We are going to use <a
href="https://datadryad.org/stash/dataset/doi:10.5061/dryad.51c59zw4v">the
data from Brian McKay’s paper</a> you saw at the beginning of the
course. Download all his files and <strong>make sure to unzip</strong>.
Find the <code>SympAct_Any_Pos.Rda</code> file, which is the one we’ll
work with.</p>
<p>Make a folder inside your portfolio repository, call it
<code>fluanalysis</code>. Make a <code>data</code> sub-folder and place
the the <code>SympAct_Any_Pos.Rda</code> file into that folder. You can
just use a single <code>data</code> folder for this exercise, but if you
want, you can also make separate <code>raw_data</code> and
<code>processed_data</code> folders and place his <code>.Rda</code> file
into the <code>raw_data</code> folder. (I know he already processed it
some, but we use it as our start, so for us that is the raw
material.)</p>
</div>
<div id="wrangling-revisited" class="section level2">
<h2>Wrangling revisited</h2>
<p>We already spent time on the important steps of data
wrangling/cleaning and exploring/visualizing. But practice makes perfect
😄 so we’ll talk a bit more and do a bit more of it here.</p>
<p>By now you will have figured out that the whole wrangling/exploring
process is iterative. Without exploring your data, you don’t know how to
clean/wrangle it. Without at least some cleaning, exploration often
doesn’t work (e.g. if you have missing values, some R summary functions
don’t work properly).</p>
<p>For this exercise, create a single <code>code</code> folder inside
the <code>fluanalysis</code> folder and place a Quarto file (either as
stand-alone Quarto or Quarto+R) called <code>wrangling.qmd</code> into
that folder. Add code that further processes and cleans the data as
follows:</p>
<ul>
<li>Load the data. Note that this is actually an <code>RDS</code>
file/object, not an <code>RData/RDA</code> file, despite the somewhat
misleading <code>.Rda</code> file name ending. So you need to use the
right function to load <code>RDS</code> files into R.</li>
<li>Remove all variables that have <em>Score</em> or <em>Total</em> or
<em>FluA</em> or <em>FluB</em> or <em>Dxname</em> or <em>Activity</em>
in their name. Don’t do this manually one by one, figure out how to use
R commands that let you remove things in an efficient manner, using
e.g., <code>contains()</code> or <code>starts_with()</code> from
<code>dplyr/tidyselect</code>.</li>
<li>Also remove the variable <code>Unique.Visit</code>. You should be
left with 32 variables coding for presence or absence of some symptom.
Only one, temperature, is continuous. A few have multiple
categories.</li>
<li>Remove any NA observations, there aren’t many.</li>
</ul>
<p><strong>Make sure to add plenty of comments and text explaining each
step. State briefly why you are making a decision, and then if the code
is not obvious, explain the how.</strong></p>
<p>At the end of your (fairly short) cleaning process, you should end up
with 730 observations and 32 variables. Save the new data set as
<code>RDS</code> file into the appropriate folder (either
<code>data</code> or if you made it, your clean data folder). (For
single objects <a
href="https://rstudio-education.github.io/hopr/dataio.html#r-files"><code>RDS</code>
is better than <code>RData/RDA</code>.</a> )</p>
<p>For our further analysis, we decide (well, I’m deciding that for you
😁) that our main continuous outcome of interest is <strong>Body
temperature</strong>, and our main categorical outcome is
<strong>Nausea</strong>. We want to see if the other symptoms are
correlated with (predict) those outcomes.</p>
</div>
<div id="eda-revisited" class="section level2">
<h2>EDA revisited</h2>
<p>As part of the data wrangling/cleaning, and also to some extent as
stand-alone exploration to prepare you for the formal statistical
fitting, you need to explore and understand your data. Add a Quarto file
(call it <code>exploration.qmd</code>) into the <code>code</code>
folder. Write code that does a bit of exploration, produces a few
figures and tables.</p>
<p>At minimum, your exploration code should do the following:</p>
<ul>
<li>For each (important) variable, produce and print some numerical
output (e.g. a table or some summary statistics numbers).</li>
<li>For each (important) continuous variable, create a histogram or
density plot.</li>
<li>Create scatterplots or boxplots or similar plots for the variable
you decided is your main outcome of interest and the most important (or
all depending on number of variables) independent variables/predictors.
For this dataset, you can pick and choose a few predictor
variables.</li>
<li>If applicable to your data, make some pairwise correlation plots.
(Not applicable here)</li>
<li>If needed for your data, explore the pattern of missing values. (Not
applicable here)</li>
<li>Any other exploration steps that might be useful.</li>
</ul>
<p>In general, if you only have a limited number of variables, say less
than 10, you can usually explore them all. If you have a lot, focus your
exploration on the ones you think are most interesting and important,
which of course is the outcome and the main predictors of interest. You
can decide on the predictors to explore. I determined the outcomes of
interest for you above. Of course, if there are variables you know are
of no interest, you can remove them during the cleaning/wrangling stage
and don’t need to explore them.</p>
</div>
<div id="general-wrangling-and-eda-comments" class="section level2">
<h2>General wrangling and EDA comments</h2>
<p>Always make sure you document well. Prior to each code piece that
produces some output, you should add text describing what you are about
to do and why. After you produced the result, add some text that
comments on what you see and what it means. E.g. you could write
something like <em>Histogram for height shows two persons at 20in,
everyone else else is above 50in. Checked to see if those are wrong
entries or not. Decided to remove those observations.</em></p>
<p>Once you’ve come this far, you should generally have at a minimum
code that explores and cleans the data, produces some figures and
tables, and saves the cleaned data set to an <code>Rds</code> file. You
should also have documentation, as comments in the code and as text in a
Quarto document, as well as some notes in README file(s), that explain
what the different parts of data and code are/do, what variables the
data contain, what each variable means, which are the main outcome(s)
and main predictor(s), etc. Providing all this meta-information is
important so that someone else (or your future self) can easily
understand what is going on.</p>
<div class="note">
<p>For this exercise, it isn’t so important that the outcomes and
predictors are of actual scientific interest. We won’t do exciting
science here, just explore the analysis workflow. However, I want to
remind you that having good/interesting question to answer (and data you
can use to answer it) is the <strong>most important</strong> part of any
research project. Rather a great question and basic stats than really
fancy stats answering a question nobody cares about!</p>
</div>
<div class="note">
<p>Any good data collection and analysis requires that data is
documented with meta-data to describe what it contains, what units
things are in, what variables are allowed, etc. Without good meta-data,
analyses often go wrong. There are famous examples in the literature
where the coding 0/1 was assumed to mean the opposite of what it was, so
all conclusions were wrong. To guard against this, careful documentation
is crucial. Also, giving variables easy to understand names and values
is best. E.g. instead of coding sex as 0/1/99, code it as
Male/Female/Other, or something along those lines. Factors in R allow
you to do this very easily, so you may as well!</p>
</div>
</div>
</div>
<div id="model-fitting" class="section level1">
<h1>Model fitting</h1>
<p>Finally, we’ll do some model fitting. Place a file called
<code>fitting.qmd</code> into the <code>code folder</code> (or
sub-folder, if you use them). As always, you can either have all the R
code inside the Quarto document, or you can structure it such that the
code is in a separate file and pulled into Quarto as needed. In either
case, document/comment well.</p>
<p>Add code that does the following operations:</p>
<ol style="list-style-type: decimal">
<li>Loads cleaned data.</li>
<li>Fits a linear model to the continuous outcome (<strong>Body
temperature</strong>) using only the main predictor of interest.</li>
<li>Fits another linear model to the continuous outcome using all
(important) predictors of interest.</li>
<li>Compares the model results for the model with just the main
predictor and all predictors.</li>
<li>Fits a logistic model to the categorical outcome
(<strong>Nausea</strong>) using only the main predictor of
interest.</li>
<li>Fits another logistic model to the categorical outcome using all
(important) predictors of interest.</li>
<li>Compares the model results for the categorical model with just the
main predictor and all predictors.</li>
</ol>
<p><strong>Here, we decide that <code>RunnyNose</code> is our main
predictor of interest, and we also care about all others. So you should
fit models with each of the 2 outcomes and <code>RunnyNose</code> and
models with each of the 2 outcomes and all predictors. Consider
whichever outcome you are currently NOT fitting to also be a predictor
of interest.</strong></p>
<p>You might have noticed that we are including some predictors twice,
e.g. we have <em>Weakness</em> as 4 categories and also as yes/no.
That’s likely not ideal. We’ll address that soon, for now let’s just
“throw it all in”. Because we do that, you might get some warning
messages from your code about rank deficiency. Usually, we would need to
inspect those and make sure we either fix or understand what’s going on
and are ok with it. For now, you can ignore.</p>
<p>For all of these operations, you should use the the
<code>tidymodels</code> framework. To do so, I suggest to go to the <a
href="https://www.tidymodels.org/start/models/">build a model
tutorial</a> in the <em>Get Started</em> section on the
<code>tidymodels</code> website. There, you’ll see an example of fitting
some data with a linear model, followed by a Bayesian model. We won’t do
the Bayesian one (but if you want you can try). From that tutorial, pick
out the bits and pieces you need to fit your two linear models. You’ll
need to use the <code>linear_reg()</code> and
<code>set_engine("lm")</code> commands. For the logistic model, you will
need to use <code>logistic_reg()</code> and
<code>set_engine("glm")</code>.</p>
<p>For each of the 4 fits (2 linear models, 2 logistic models), report
the results in some way, either as table or figure. You might want to
try the <code>glance()</code> function. You can also play around a bit
with the <code>predict()</code> function or do some other explorations
with your fits. This is open-ended, so play around as much or as little
as you like.</p>
<p>Comparison of models should be based on performance of the models
(and anything else you want to look at). This should be heuristic, with
you looking at and discussing differences. Please no comparison using
p-values or other statistical shenanigans 😄.</p>
<p>The main point of this is to get you started fitting models with
<code>tidymodels</code>. You’ll likely see lots of information on the
<code>tidymodels</code> website that might not make sense yet, such as
pre-processing, model evaluation, tuning, etc. Just ignore that for now,
we’ll get to it soon enough.</p>
<p>If you are extra ambitious or just enjoy playing around with
<code>tidymodels</code>, add a <em>k</em>-nearest neighbors model fit to
the continuous and/or categorical outcome. You do that by choosing
<code>nearest_neighbor()</code> as the model type (instead of
<code>linear_reg()</code> or <code>logistic_reg()</code>). It seems that
<code>nearest_neighbor()</code> currently only supports a single engine
(underlying implementation/model) called <code>kknn</code>, so you don’t
even have to set an engine, it will use that one as default (but it’s
still good practice in case <code>tidymodels</code> adds another engine
in the future 😁). The rest should work as before. The fact that we can
easily switch models and don’t have to write much new code is the beauty
of the <code>tidymodels</code> framework and will become even clearer
soon.</p>
<div class="note">
<p>I’m a big fan of fitting models in a Bayesian framework. R has many
good packages. Most of them connect to the <a
href="https://mc-stan.org/">Stan software</a>, an independent piece of
powerful Bayesian fitting software. It can be somewhat tricky to get the
installation of Stan and the connection to R working. So if you try to
do some Bayesian modeling, along the lines of the example in the
<code>tidymodels</code> tutorial, some initial fiddling is required.
Once you get it up and running, it usually works well. The Stan website
provides useful instructions. Learning some Bayesian statistics is very
useful. Unfortunately, it’s beyond what we can cover in this course.</p>
</div>
</div>
<div id="updating-the-portfolio-website" class="section level1">
<h1>Updating the portfolio website</h1>
<p>Once you completed your <code>tidymodels</code> exploration, make
sure everything runs and produces relevant output (tables, figures,
text, etc.). <strong>Also make sure everything is documented
well.</strong></p>
<p>Now it’s time to add everything to the portfolio website. For that,
open the <code>_quarto.yml</code> file and make a new entry in the
<code>navbar</code> section. Make a new main menu entry (at the same
level as the the current <code>Projects</code> entry) and call it
<code>Flu Analysis</code>. Underneath this entry, make 3 sub menu
entries for the 3 Quarto files you just created, namely
wrangling/Exploration/Fitting. Note that you need to point to the html
file in the folder you created the Quarto file. So for instance for your
wrangling file, it should look like</p>
<pre class="r"><code>href: ./fluanalysis/code/wrangling.html</code></pre>
<p><strong>Remember that YAML is very picky about indentation, so if you
get strange error messages, it is often likely that your entries are not
aligned/indented exactly right. If you suspect that you have this
problem, you can show whitespace characters in RStudio by going to
`Tools -&gt; Global Options -&gt; Code -&gt; Display” and check <em>Show
Whitespace Characters</em>. </strong></p>
<p>Recompile your full portfolio website. If everything works, you
should see a new menu item called <code>Flu Analysis</code> next to
<code>Projects</code> with 3 entries (Wrangling/Exploration/Fitting),
each one containing the rendered version of your Quarto file. Once
everyting works and looks as it should, remember to commit and push your
updates to GitHub.</p>
<p><strong>Since this is part of your portfolio site, you don’t need to
post anything, I know where to find it. Therefore there is no exercise
Slack channel for this module.</strong></p>
</div>
<div id="discussion" class="section level1">
<h1>Discussion</h1>
<p>Write a post in this week’s discussion channel that answers this
question:</p>
<p>Which major new insight did you gain from this week’s topic (or any
topic related to model fitting you got exposed to over the last few
weeks) and how will that maybe affect your analyses in the future? And
what point(s) do you find rather confusing about the model fitting
material we covered so far?</p>
<p>Post by Wednesday, then reply to each other by Friday. See if you can
help each other reduce any existing confusion. I’ll be participating
too, of course!</p>
</div>



</div>
</div>

</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.odd').parent('tbody').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open');
  });
});
</script>

<!-- code folding -->

<script>
$(document).ready(function ()  {

    // temporarily add toc-ignore selector to headers for the consistency with Pandoc
    $('.unlisted.unnumbered').addClass('toc-ignore')

    // move toc-ignore selectors from section div to header
    $('div.section.toc-ignore')
        .removeClass('toc-ignore')
        .children('h1,h2,h3,h4,h5').addClass('toc-ignore');

    // establish options
    var options = {
      selectors: "h1,h2,h3",
      theme: "bootstrap3",
      context: '.toc-content',
      hashGenerator: function (text) {
        return text.replace(/[.\\/?&!#<>]/g, '').replace(/\s/g, '_');
      },
      ignoreSelector: ".toc-ignore",
      scrollTo: 0
    };
    options.showAndHide = false;
    options.smoothScroll = true;

    // tocify
    var toc = $("#TOC").tocify(options).data("toc-tocify");
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
